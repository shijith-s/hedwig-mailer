(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{21:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},48:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(30),r=n.n(a),i=(n(37),n(8)),l=(n(38),n(7)),o=n(0);var d=function(){return Object(o.jsxs)("div",{className:"signInPage",children:[Object(o.jsxs)("div",{className:"signInPage__header",children:[Object(o.jsx)("div",{className:"signInPage__left",children:Object(o.jsx)("div",{className:"signInPage__logo",children:Object(o.jsx)("h2",{children:"hedwig"})})}),Object(o.jsxs)("div",{className:"signInPage__right",children:[Object(o.jsx)(l.b,{to:"/signin",children:Object(o.jsx)("button",{className:"signInPage__login",children:"Sign In"})}),Object(o.jsx)(l.b,{to:"/signup",children:Object(o.jsx)("button",{className:"signInPage__signUp",children:"Sign Up"})})]})]}),Object(o.jsxs)("div",{className:"signInPage__content",children:[Object(o.jsx)("h1",{children:"Hi there!"}),Object(o.jsx)("p",{children:"I will help you to store and send emails according to your schedule."})]})]})},u=(n(48),n(2)),j=n(11),h=n.n(j),m=n(13),b=(n(21),n(10)),p=n.n(b),g={userID:null,name:null,token:null},x=function(e,t){switch(t.type){case"ADD_USER":return{name:t.name,userID:t.userID,token:t.token};case"REMOVE_USER":return{name:null,userId:null,token:null};default:return e}},O=Object(s.createContext)(),v=function(e){var t=e.children;return Object(o.jsx)(O.Provider,{value:Object(s.useReducer)(x,g),children:t})};var y=function(){var e=Object(u.g)(),t=Object(s.useContext)(O),n=Object(i.a)(t,2),c=(n[0],n[1]),a=function(){var t=Object(m.a)(h.a.mark((function t(n){var s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),s={name:n.target.name.value,username:n.target.username.value,password:n.target.password.value},console.log(s),p.a.post("http://localhost:9000/user/signup",s).then((function(t){console.log(t),sessionStorage.setItem("token",t.data.jwtToken),sessionStorage.setItem("name",t.data.name),c({type:"ADD_USER",name:t.data.name,token:t.data.jwtToken}),e.push("/home")})).catch((function(e){console.log("some error occured"),console.log(e.response.data.message),alert(e.response.data.message)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.jsx)("div",{className:"signUp",children:Object(o.jsxs)("div",{className:"sign__body",children:[Object(o.jsx)("div",{className:"sign__header",children:Object(o.jsx)(l.b,{to:"/",className:"link",children:Object(o.jsx)("h2",{children:"hedwig"})})}),Object(o.jsxs)("div",{className:"sign__form",children:[Object(o.jsxs)("form",{onSubmit:a,children:[Object(o.jsx)("input",{type:"text",minLength:"6",name:"name",placeholder:"Enter your Name"}),Object(o.jsx)("input",{type:"text",minLength:"6",name:"username",placeholder:" Username"}),Object(o.jsx)("input",{type:"password",minLength:"6",name:"password",placeholder:"Password",className:"login__password"}),Object(o.jsxs)("div",{className:"pwdCheckbox",children:[Object(o.jsx)("input",{type:"checkbox",name:"pwdCheck",value:!0,onClick:function(e){console.log("checkbox clicked"),console.log(e.target.checked),e.target.checked?document.querySelector(".login__password").type="text":document.querySelector(".login__password").type="password"},id:"pwdCheck",className:"pwdCheck"}),Object(o.jsx)("label",{for:"pwdCheck",children:"Show password"})]}),Object(o.jsx)("button",{type:"submit",children:"Sign Up"}),Object(o.jsx)("button",{children:"Sign Up using Google"})]}),Object(o.jsxs)("h5",{className:"sign__alternate",children:["Already have an account?"," ",Object(o.jsx)(l.b,{to:"/signin",className:"sign__alternateAnch",children:"Sign In"})]})]})]})})};var _=function(){var e=Object(u.g)(),t=Object(s.useContext)(O),n=Object(i.a)(t,2),c=(n[0],n[1]),a=function(){var t=Object(m.a)(h.a.mark((function t(n){var s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),s={username:n.target.username.value,password:n.target.password.value},p.a.post("http://localhost:9000/user/login",s).then((function(t){sessionStorage.setItem("token",t.data.jwtToken),sessionStorage.setItem("name",t.data.name),c({type:"ADD_USER",name:t.data.name,token:t.data.jwtToken}),e.push("/home")})).catch((function(e){console.log(e.response.data.message),alert(e.response.data.message)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.jsx)("div",{className:"signIn",children:Object(o.jsxs)("div",{className:"sign__body",children:[Object(o.jsx)("div",{className:"sign__header",children:Object(o.jsx)(l.b,{to:"/",className:"link",children:Object(o.jsx)("h2",{children:"hedwig"})})}),Object(o.jsxs)("div",{className:"sign__form",children:[Object(o.jsxs)("form",{onSubmit:a,children:[Object(o.jsx)("input",{type:"text",minLength:"6",name:"username",placeholder:" Username"}),Object(o.jsx)("input",{type:"password",minLength:"6",name:"password",placeholder:"Password",className:"login__password"}),Object(o.jsxs)("div",{className:"pwdCheckbox",children:[Object(o.jsx)("input",{type:"checkbox",name:"pwdCheck",value:!0,onClick:function(e){console.log("checkbox clicked"),console.log(e.target.checked),e.target.checked?document.querySelector(".login__password").type="text":document.querySelector(".login__password").type="password"},id:"pwdCheck",className:"pwdCheck"}),Object(o.jsx)("label",{for:"pwdCheck",children:"Show password"})]}),Object(o.jsx)("button",{type:"submit",children:"Sign In"}),Object(o.jsx)("button",{children:"Sign In using Google"})]}),Object(o.jsxs)("h5",{className:"sign__alternate",children:["Don't have an account?"," ",Object(o.jsx)(l.b,{to:"/signup",className:"sign__alternateAnch",children:"Sign Up"})]})]})]})})},f=(n(68),n(69),["sunday","monday","tuesday","wednesday","thursday","friday","saturday"]),w=["january","february","march","april","may","june","july","august","september","october","november","december"];var k=function(e){var t=e.getAllMails,n=Object(s.useState)(""),c=Object(i.a)(n,2),a=c[0],r=c[1],l=Object(s.useState)("minutes"),d=Object(i.a)(l,2),u=d[0],j=d[1];console.log(a);var h="";switch(a){case"recurring":h=Object(o.jsx)(N,{setRecurringFormat:j,recurringFormat:u});break;case"weekly":h=Object(o.jsx)(S,{});break;case"monthly":h=Object(o.jsx)(I,{});break;case"yearly":h=Object(o.jsx)(C,{});break;default:h=""}var m=function(){document.querySelector(".home__mailForm").style.display="none"};return Object(o.jsxs)("div",{className:"newMail",children:[Object(o.jsx)("div",{onClick:m,className:"newMail__cross",children:"\u274c"}),Object(o.jsx)("h2",{children:"Create a new Mail"}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=sessionStorage.getItem("token"),s=function(e){switch(a){case"recurring":return{type:"recurring",data:{timeFormat:u,interval:e.target.interval.value}};case"weekly":return{type:"weekly",data:{day:e.target.day.value,time:e.target.time.value}};case"monthly":return{type:"monthly",data:{date:e.target.date.value,time:e.target.time.value}};case"yearly":return{type:"yearly",data:{month:e.target.month.value,date:e.target.date.value,time:e.target.time.value}};default:return alert("Select a schedule"),!1}}(e);if(console.log("displaying scheduled data"),console.log(s),e.target.recipient.value.split("/").forEach((function(e){!function(e){!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)||alert("You have entered an invalid email address!\n"+e)}(e)})),s){var c={title:e.target.title.value,subject:e.target.subject.value,recipients:e.target.recipient.value.split("/"),body:e.target.body.value,time:Date.now(),schedule:s};console.log(c),p.a.post("http://localhost:9000/user/mails/add",c,{headers:{authorization:"Bearer "+n}}).then((function(e){console.log(e),alert(e.data),m(),t()}))}else alert("select a schedule")},className:"newMail__Form",children:[Object(o.jsxs)("div",{className:"newMail__options",children:[Object(o.jsxs)("select",{name:"schedule",onChange:function(e){r(e.target.value)},children:[Object(o.jsx)("option",{value:"schedule",disabled:!0,selected:!0,children:"Select schedule"}),Object(o.jsx)("option",{value:"recurring",children:"Recurring"}),Object(o.jsx)("option",{value:"weekly",children:"Weekly"}),Object(o.jsx)("option",{value:"monthly",children:"Monthly"}),Object(o.jsx)("option",{value:"yearly",children:"Yearly"})]}),Object(o.jsx)("div",{className:"schedule__optionsPart",children:h})]}),Object(o.jsxs)("div",{className:"newMail__formContent",children:[Object(o.jsx)("input",{type:"text",name:"title",placeholder:"Enter the title",className:"newMail__Title",required:!0}),Object(o.jsx)("input",{type:"text",name:"subject",placeholder:"Enter the subject",className:"newMail__Subject",required:!0}),Object(o.jsx)("input",{type:"text",name:"recipient",placeholder:"Enter the recipient email ids   (enter multiple email ids by separating them with '/')",className:"newMail__Recipient",required:!0}),Object(o.jsx)("textarea",{name:"body",id:"",cols:"30",rows:"10",placeholder:"Enter the body of mail",className:"newMail__body"}),Object(o.jsx)("button",{type:"submit",children:"Submit"})]})]})]})},N=function(e){var t=e.setRecurringFormat,n=e.recurringFormat;return Object(o.jsxs)("div",{className:"schedule__recurring schedule__options",children:[Object(o.jsx)("h3",{children:"Recurring Schedule"}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h5",{children:"Interval:"}),Object(o.jsx)("input",{type:"number",min:"1",max:"hours"===n?"24":"60",size:"2",maxLength:"2",required:!0,name:"interval"}),Object(o.jsxs)("select",{name:"timeFormat",onChange:function(e){t(e.target.value)},children:[Object(o.jsx)("option",{value:"minutes",selected:!0,children:"Minutes"}),Object(o.jsx)("option",{value:"hours",children:"Hours"})]})]})]})},S=function(){return Object(o.jsxs)("div",{className:"schedule__weekly schedule__options",children:[Object(o.jsx)("h3",{children:"Weekly Schedule"}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h5",{children:"week day:"}),Object(o.jsx)("select",{name:"day",required:!0,children:f.map((function(e,t){return Object(o.jsx)("option",{value:t,children:e})}))})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h5",{children:"Time:"}),Object(o.jsx)("div",{className:"time",children:Object(o.jsx)("input",{type:"time",name:"time",required:!0})})]})]})},I=function(){return Object(o.jsxs)("div",{className:"schedule__monthly schedule__options",children:[Object(o.jsx)("h3",{children:"Monthly Schedule"}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h5",{children:"Day of the month:"}),Object(o.jsx)("input",{type:"number",min:"0",max:"31",name:"date",required:!0})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h5",{children:"Time:"}),Object(o.jsx)("div",{className:"schedule__monthly__time ",children:Object(o.jsx)("input",{type:"time",name:"time",required:!0})})]})]})},C=function(){return Object(o.jsxs)("div",{className:"schedule__yearly schedule__options",children:[Object(o.jsx)("h3",{children:"Yearly Schedule"}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h5",{children:"Month of the year:"}),Object(o.jsx)("select",{name:"month",required:!0,children:w.map((function(e,t){return Object(o.jsx)("option",{value:t+1,children:e})}))})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h5",{children:"Day of the month:"}),Object(o.jsx)("input",{type:"number",min:"1",max:"31",name:"date",required:!0})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h5",{children:"Time:"}),Object(o.jsx)("div",{className:"schedule__monthly__time",children:Object(o.jsx)("input",{type:"time",name:"time",required:!0})})]})]})},M=n(32),D=(n(70),n.p+"static/media/trash-alt-solid.6346df54.svg"),E=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],q=["january","february","march","april","may","june","july","august","september","october","november","december"],F=function(e){var t=new Date(e),n=t.getDate(),s=t.getMonth(),c=t.getFullYear(),a=("0"+t.getHours()).slice(-2),r=("0"+t.getMinutes()).slice(-2);return"".concat(n,"/").concat(s,"/").concat(c," \xa0\xa0 ").concat(a,":").concat(r)},R=function(e,t){switch(e){case"recurring":console.log(t.split(" "));var n=t.split(" ")[0],s=t.split(" ")[1];return"*"===n?"Every ".concat(s.slice(2)," hours"):"Every ".concat(n.slice(2)," minutes");case"weekly":var c=("0"+t.split(" ")[0]).slice(-2),a=("0"+t.split(" ")[1]).slice(-2),r=Number(t.split(" ")[4]);return"Weekly on every ".concat(E[r]," at ").concat(a,":").concat(c);case"monthly":var i=("0"+t.split(" ")[0]).slice(-2),l=("0"+t.split(" ")[1]).slice(-2),o=Number(t.split(" ")[2]);return"Monthly on ".concat(o," of every month at ").concat(l,":").concat(i);case"yearly":var d=("0"+t.split(" ")[0]).slice(-2),u=("0"+t.split(" ")[1]).slice(-2),j=Number(t.split(" ")[2]),h=Number(t.split(" ")[3]);return"Yearly on ".concat(j," of ").concat(q[h]," at ").concat(u,":").concat(d);default:return" "}};var P=function(e){var t=e.mail,n=e.setMails,s=e.allMails;return Object(o.jsxs)("div",{className:"mail",children:[Object(o.jsx)("h1",{className:"mail__title",children:t.title}),Object(o.jsxs)("p",{className:"mail__subject",children:["Sub\xa0:\xa0",t.subject]}),Object(o.jsx)("div",{className:"mail_schedule",children:R(t.scheduleType,t.schedule)}),Object(o.jsxs)("div",{className:"mail__footer",children:[Object(o.jsxs)("p",{className:"mail__time",children:["Created : ",F(t.time)]}),Object(o.jsx)("img",{src:D,alt:"",className:"mail__trash",onClick:function(){console.log("deleting this");var e=sessionStorage.getItem("token"),c="http://localhost:9000/user/mails/delete/"+t._id;console.log(c);var a=Object(M.a)(s),r=a.findIndex((function(e){return e._id===t._id}));a.splice(r,1),n(a),p.a.delete(c,{headers:{authorization:"Bearer "+e}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}})]})]})};var U=function(){var e=Object(s.useContext)(O),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(u.g)(),r=n.name;Object(s.useEffect)((function(){g()}),[]);var l=Object(s.useState)([]),d=Object(i.a)(l,2),j=d[0],b=d[1],g=function(){var e=Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:9000/user/mails/getall",t=sessionStorage.getItem("token"),e.next=4,p.a.get("http://localhost:9000/user/mails/getall",{headers:{authorization:"Bearer "+t}}).then((function(e){console.log(e.data),b(e.data.mails)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log(j),Object(o.jsxs)("div",{className:"home",children:[Object(o.jsxs)("div",{className:"home__header",children:[Object(o.jsx)("h2",{children:"hedwig"}),Object(o.jsxs)("div",{className:"home__headerRight",children:[Object(o.jsx)("h3",{children:"Hello ".concat(r||"")}),Object(o.jsx)("button",{className:"home__logout",onClick:function(){sessionStorage.clear(),c({type:"REMOVE_USER"}),a.push("/")},children:"logout"})]})]}),Object(o.jsx)("div",{className:"home__mails",children:j.map((function(e){return Object(o.jsx)(P,{mail:e,setMails:b,allMails:j})}))}),Object(o.jsx)("div",{className:"home__mailForm",children:Object(o.jsx)(k,{getAllMails:g})}),Object(o.jsx)("button",{className:"home__newMail",onClick:function(){document.querySelector(".home__mailForm").style.display="block"},children:"Create New Mail"})]})};var A=function(){var e=Object(s.useContext)(O),t=Object(i.a)(e,2),n=(t[0],t[1]);return Object(s.useEffect)((function(){var e=sessionStorage.getItem("token"),t=sessionStorage.getItem("id"),s=sessionStorage.getItem("name");n({type:"ADD_USER",userID:t,name:s,token:e})}),[]),Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(l.a,{children:Object(o.jsxs)(u.d,{children:[Object(o.jsx)(u.b,{path:"/signin",children:sessionStorage.getItem("token")?Object(o.jsx)(u.a,{to:"/home"}):Object(o.jsx)(_,{})}),Object(o.jsx)(u.b,{path:"/signup",children:sessionStorage.getItem("token")?Object(o.jsx)(u.a,{to:"/home"}):Object(o.jsx)(y,{})}),Object(o.jsx)(u.b,{path:"/home",children:sessionStorage.getItem("token")?Object(o.jsx)(U,{}):Object(o.jsx)(u.a,{to:"/"})}),Object(o.jsx)(u.b,{path:"/",children:sessionStorage.getItem("token")?Object(o.jsx)(u.a,{to:"/home"}):Object(o.jsx)(d,{})})]})})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,72)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),a(e),r(e)}))};r.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(v,{children:Object(o.jsx)(A,{})})}),document.getElementById("root")),T()}},[[71,1,2]]]);
//# sourceMappingURL=main.aed46e46.chunk.js.map